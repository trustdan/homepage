{{/* 
    particles.html - Hugo shortcode for particles.js
    
    Parameters:
    - id (optional): ID for the particles container element
    - preset (optional): Use a predefined preset (default, snow, nightsky, spacydots, bubbles)
    - color (optional): Base color for particles (e.g. "#ff0000")
    - number (optional): Number of particles to display
    - shape (optional): Shape of particles (circle, edge, triangle, polygon, star)
    - size (optional): Size of particles
    - speed (optional): Speed of particle movement
    - direction (optional): Direction of movement (none, top, top-right, right, etc.)
    
    Example usage:
    {{< particles >}}
    {{< particles preset="snow" >}}
    {{< particles color="#ff0000" number="150" size="5" >}}
*/}}

<div id="{{ or (.Get "id") "particles-js" }}" style="width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: -1;"></div>
<script src="{{ or (.Get "js-path") "/js/particles.min.js" }}"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  // This path would point to your API endpoint generated by your Go handler
  var configPath = '{{ or (.Get "config-url") "/api/particles-config" }}';
  
  // Add any parameters from the shortcode
  var params = [];
  {{ with .Get "preset" }}params.push('preset={{ . }}');{{ end }}
  {{ with .Get "color" }}params.push('color={{ . }}');{{ end }}
  {{ with .Get "number" }}params.push('number={{ . }}');{{ end }}
  {{ with .Get "shape" }}params.push('shape={{ . }}');{{ end }}
  {{ with .Get "size" }}params.push('size={{ . }}');{{ end }}
  {{ with .Get "speed" }}params.push('speed={{ . }}');{{ end }}
  {{ with .Get "direction" }}params.push('direction={{ . }}');{{ end }}
  
  if (params.length > 0) {
    configPath += '?' + params.join('&');
  }
  
  particlesJS.load('{{ or (.Get "id") "particles-js" }}', configPath, function() {
    console.log('particles.js loaded');
  });
});
</script> 